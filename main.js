!function(n){var i={};function o(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=n,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="./",o(o.s=0)}([function(t,e,n){n(4),t.exports=n(3)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var s=["🍋","🍊","🍉","🍈","🍇","🥝","🍓","🍒","🌟","🍀","💎","🎰"],i=[s,["🧣","⛄","🎄","🎁","🎀","🍾","🍷","🔔","🌟","🦌","🎅"],["🌚","🎃","🦇","😈","🧠","👹","👽","🤡","👻","🧟‍","🧛‍","💀"],["🐞","🐟","🐭","🐸","🐓","🐷","🦀","🐍","🦊‍","🦁","🦕","🦖"],["🎯","🎱","🏐","⛳","⚾","🏈","🏀","⚽","🥉","🥈","🥇","🏆"],["💌","🎁","📸","💘","💋","🔞","💑","💍","💎","💖"],["🎴","🎲","🕶","🥃","💷","💴","💵","💰","🍀","💎","🎰","🧞‍️","🃏"],["🥦","🍋","🍆","🍙","🍯","🍑","🍓","🍭","🍫","🍩","🍕","🍗","🥩","🍣"]],o=i[Math.random()*i.length|0],f=null;function c(t,e,n,i,o){var r,a,s=[e,n-.25*i,n+.125*i,n-.0625*i,n+.03125*i,n-.015625*i,n],l=e,c=0,u=s.map(function(t){var e=Math.max(Math.abs(t-l)/Math.abs(o),10);return l=t,c+=e,e}),h=0,p=u.map(function(t){var e=h+t/c*100;return h=e}).map(function(t,e){return"".concat(Math.round(t),"% { transform: rotate(").concat(s[e].toFixed(2),"deg); }")}).join("\n");return r=t,a=p,f||((f=document.createElement("style")).type="text/css",document.head.appendChild(f)),f.sheet.insertRule("@keyframes ".concat(r," {\n        ").concat(a,"\n    }"),f.length),c}var l=/iPad|iPhone|iPod/.test(navigator.platform||""),y=navigator.userAgent.toLowerCase().includes("firefox");function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function r(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:16;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.sounds=[],this.nextSound=0,this.totalSounds=0;for(var i=this.sounds,o=0;o<n;++o)i.push(new Audio(t));i[0].oncanplay=function(){e.totalSounds=n}}var t,e,n;return t=r,(e=[{key:"play",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=this.sounds,n=this.nextSound,i=this.totalSounds,o=e[n];i&&o.paused&&(o.volume=t,o.play(),this.nextSound=(n+1)%i)}}])&&a(t.prototype,e),n&&a(t,n),r}(),u=y?"ogg":"mp3",h=new r("./sounds/blip.".concat(u),32),p=new r("./sounds/coin.".concat(u)),d=new r("./sounds/stop.".concat(u)),m=new r("./sounds/unlucky.".concat(u)),v=new r("./sounds/win.".concat(u)),_=function(){h.play.apply(h,arguments)},S=function(){p.play.apply(p,arguments)},I=function(){d.play.apply(d,arguments)},g=function(){m.play.apply(m,arguments)},E=function(){v.play.apply(v,arguments)},O=window.navigator,C=O.vibrate?O.vibrate.bind(O):function(){},T=[200,50,50,50,50,25,25,25,25,25,25,25,25],b=[25,25,25,25,25,25,25,25,50,50,50,50,50],A=function(){C(b)},P=function(){C(T)},w=!1,k=null;function R(){w=!0}function N(){w=!1}function L(){w&&(k(),w=!1)}function M(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,o=document.createElement("DIV");return o.className=Array.isArray(t)?t.join(" "):t,"string"==typeof e?o.innerText=e:e&&o.appendChild(e),i&&(o.style=i),null!==n&&(o.style.transform="rotate(".concat(n,"deg)")),o}function D(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var j=function(){function v(t,r,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),this.root=void 0,this.style=void 0,this.index=void 0,this.alpha=void 0,this.shadowCount=void 0,this.angle=0,this.stopAt=0,this.index=t,this.alpha=r;var i=v.C_REEL,a=v.C_CELL,o=v.C_CELL_SHADOW,s=v.C_CELL_BLUR,l=v.C_FIGURE,c=v.C_IS_STOP,u=v.V_INDEX,h=this.root=M([i,c]);if((this.style=h.style).setProperty(u,t),e){var p,d;d=y?(p=[a,o],.5):(p=[a,o,s],1);var f=this.shadowCount=Math.max(2,Math.round((n-.5-2*t)*Math.PI/e.length)),m=1/f;!function(t){for(var e=t.length-1;0<e;--e){var n=Math.floor(Math.random()*(e+1)),i=[t[n],t[e]];t[e]=i[0],t[n]=i[1]}}(e),e.forEach(function(t,e){var n=M(l,t),i=M(a,n,e*r);h.appendChild(i);for(var o=1;o<f;++o)h.appendChild(M(p,n.cloneNode(!0),r*(e+m*o),"opacity: ".concat(d*(1-m*o),"; ")))})}}var t,e,n;return t=v,(e=[{key:"reset",value:function(){var t=this.root,e=this.style,n=this.stopAt;t.classList.remove("is-stop"),e.transform="rotate(".concat(this.angle=(360-n)%360,"deg)"),e.animation="",this.stopAt=0}},{key:"stop",value:function(t,e){var n=this.alpha,i=this.root,o=(360-this.angle-e)%360,r=Math.ceil(o/n),a=r*n,s="stop-".concat(this.index),l=c(s,(360-o)%360,(360-a)%360,n,t)*v.STOP_ANIMATION_DURATION_MULTIPLIER;return this.stopAt=a,this.style.animation="".concat(s," ").concat(l,"ms ease-out forwards"),i.classList.add(v.C_IS_STOP),(i.children[r*this.shadowCount]||i.children[0]).innerText}}])&&D(t.prototype,e),n&&D(t,n),v}();j.C_REEL="sm__reel",j.C_CELL="sm__cell",j.C_CELL_SHADOW="sm__cell--has-shadow",j.C_CELL_BLUR="sm__cell--has-blur",j.C_FIGURE="sm__figure",j.C_IS_STOP="is-stop",j.V_INDEX="--index",j.STOP_ANIMATION_DURATION_MULTIPLIER=5;n(1);function x(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function z(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var U=function(){function d(t,e,n){var i,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:3,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:s,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:-.8;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),this.wrapper=void 0,this.root=document.querySelector(d.S_BASE),this.reelsContainer=document.querySelector(d.S_REELS_CONTAINER),this.display=document.querySelector(d.S_DISPLAY),this.reels=[],this.blipFading=void 0,this.reelCount=void 0,this.symbols=void 0,this.alpha=void 0,this.speed=void 0,this.zoomTransitionTimeoutID=null,this.currentCombination=[],this.currentPrize=null,this.currentReel=null,this.blipCounter=0,this.lastUpdate=0,this.init(t,e,n,o,r,a),window.onresize=this.handleResize.bind(this),document.onkeydown=this.handleKeyDown.bind(this),i=this.handleClick.bind(this),k=i,l?(document.ontouchstart=R,document.ontouchmove=N,document.ontouchcancel=N,document.ontouchend=L):document.onclick=i}var t,e,n;return t=d,(e=[{key:"init",value:function(t,e,n,i,o,r){this.wrapper=t,this.handleUseCoin=e,this.handleGetPrice=n,this.reelCount=i,this.symbols=o,this.speed=r,this.blipFading=1/i;var a=this.alpha=360/o.length,s=x(o),l=2*i+d.UNITS_CENTER;this.resize(),y&&this.root.style.setProperty(d.V_SHADOW_WEIGHT,d.FIREFOX_SHADOW_WEIGHT);for(var c=this.reelsContainer,u=this.reels,h=0;h<i;++h){var p=new j(h,a,s,l);c.appendChild(p.root),u.push(p)}c.appendChild(new j(i).root)}},{key:"start",value:function(){var t=this;this.handleUseCoin(),this.currentCombination=[],this.currentPrize=null,this.currentReel=0,this.zoomOut(),this.reels.forEach(function(t){return t.reset()}),f&&(f.remove(),f=null),S(),A(),this.lastUpdate=performance.now(),requestAnimationFrame(function(){return t.tick()})}},{key:"stop",value:function(){this.currentReel=null,this.zoomIn();var t=this.currentPrize;t?(E(),this.handleGetPrice.apply(this,x(t))):g()}},{key:"tick",value:function(){var t=this,e=this.reels,n=this.speed,i=this.currentReel,o=this.lastUpdate,r=performance.now(),a=(r-o)*n;if(null!==i){0===(this.blipCounter=(this.blipCounter+1)%d.BLIP_RATE)&&_(1-this.blipFading*i),this.lastUpdate=r;for(var s=e.length-1;i<=s;--s){var l=e[s],c=l.angle=(360+(l.angle+a))%360;l.style.transform="rotate(".concat(c,"deg)")}requestAnimationFrame(function(){return t.tick()})}}},{key:"zoomIn",value:function(){this.zoom()}},{key:"zoomOut",value:function(){this.zoom(!0)}},{key:"zoom",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];clearTimeout(this.zoomTransitionTimeoutID);var e=this.root;e.style.transition=d.ZOOM_TRANSITION,e.classList[t?"remove":"add"](d.C_HAS_ZOOM),this.zoomTransitionTimeoutID=setTimeout(function(){e.style.transition=""},d.ZOOM_TRANSITION_DURATION)}},{key:"resize",value:function(){var t=this.wrapper,e=this.root,n=this.reelCount,i=this.display,o=e.style,r=t.offsetWidth,a=t.offsetHeight,s=Math.min(r,a)-d.APP_PADDING,l=s/(2*n+d.UNITS_TOTAL)|0;o.setProperty(d.V_WRAPPER_SIZE,"".concat(s,"px")),o.setProperty(d.V_REEL_SIZE,"".concat(l,"px")),o.setProperty(d.V_DISPLAY_SIZE,"".concat(l*n,"px")),o.setProperty(d.V_DISPLAY_ZOOM,"".concat(e.offsetWidth/i.offsetWidth))}},{key:"stopReel",value:function(t){var e=this.speed,n=(performance.now()-this.lastUpdate)*e;this.currentCombination.push(this.reels[t].stop(e,n)),this.checkPrize(),I(),P()}},{key:"checkPrize",value:function(){for(var t=this.currentReel,e=this.currentCombination,n=this.reelCount,i=this.symbols,o={},r=0,a="",s="",l=0,c=0;c<t;++c){var u=e[c],h=o[u]=a===u?o[u]+1:1;if(a=u,r<h){r=h;var p=i.indexOf(u);i.indexOf(s)<p&&(s=u,l=p+1)}}2<r&&(this.currentPrize=[l,r*(l/i.length)/n])}},{key:"handleResize",value:function(){var t=this;requestAnimationFrame(function(){return t.resize()})}},{key:"handleKeyDown",value:function(t){var e=t.key;" "!==e&&"Enter"!==e||this.handleClick()}},{key:"handleClick",value:function(){var t=this.currentReel;null===t?this.start():(++this.currentReel,this.stopReel(t),t===this.reels.length-1&&this.stop())}}])&&z(t.prototype,e),n&&z(t,n),d}();U.C_HAS_ZOOM="has-zoom",U.S_BASE=".sm__base",U.S_REELS_CONTAINER=".sm__reelsContainer",U.S_DISPLAY=".sm__display",U.V_WRAPPER_SIZE="--wrapperSize",U.V_REEL_SIZE="--reelSize",U.V_DISPLAY_SIZE="--displaySize",U.V_DISPLAY_ZOOM="--displayZoom",U.V_SHADOW_WEIGHT="--shadowWeight",U.UNITS_CENTER=3,U.UNITS_MARGIN=1,U.UNITS_TOTAL=U.UNITS_CENTER+U.UNITS_MARGIN,U.ZOOM_TRANSITION="transform ease-in-out 500ms 250ms",U.ZOOM_TRANSITION_DURATION=1e3,U.BLIP_RATE=4,U.FIREFOX_SHADOW_WEIGHT=.5,U.APP_PADDING=32;n(2);function V(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var W=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.coinsElement=document.querySelector(e.S_COINS),this.jackpotElement=document.querySelector(e.S_JACKPOT),this.spinsElement=document.querySelector(e.S_SPINS),this.mainElement=document.querySelector(e.S_MAIN),this.coins=parseInt(localStorage.coins,10)||100,this.jackpot=parseInt(localStorage.jackpot,10)||1e3,this.spins=parseInt(localStorage.spins,10)||0,this.lastSpin=localStorage.lastSpin||0;var t=Date.now();t-this.lastSpin>=e.ONE_DAY&&(localStorage.jackpot=this.jackpot=0|Math.max(500,this.jackpot-500+1e3*Math.random()),localStorage.lastSpin=t),new U(this.mainElement,this.handleUseCoin.bind(this),this.handleGetPrice.bind(this),5,o),this.refreshView()}var t,n,i;return t=e,(n=[{key:"handleUseCoin",value:function(){localStorage.coins=this.coins=Math.max(this.coins-1,0)||100,localStorage.jackpot=++this.jackpot,localStorage.spins=++this.spins,localStorage.lastSpin=this.lastSpin=Date.now(),this.refreshView()}},{key:"handleGetPrice",value:function(t,e){var n=t+Math.round(e*this.jackpot);localStorage.jackpot=this.jackpot=Math.max(this.jackpot-n,0)||1e3,localStorage.coins=this.coins+=n,this.refreshView()}},{key:"refreshView",value:function(){this.coinsElement.innerText=this.coins,this.jackpotElement.innerText=this.jackpot,this.spinsElement.innerText=this.spins}}])&&V(t.prototype,n),i&&V(t,i),e}();W.S_COINS="#coins",W.S_JACKPOT="#jackpot",W.S_SPINS="#spins",W.S_MAIN="#main",W.ONE_DAY=864e5,new W}]);