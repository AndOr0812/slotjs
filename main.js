!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./",n(n.s=0)}([function(t,e,n){n(4),t.exports=n(3)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var o=["💀","🍋","🍊","🍉","🍇","🍓","🍒","🔔","🍀","💎"],i=[o,["⛄","🦌","🎄","🎀","🎁","🎆","🍾","🔔","🎅","🌟"],["🌚","🐺","🎃","🧠","👹","👽","👻","🧟‍","🧛‍","💀"],["🐭","🐱","🦀","🐞","🐓","🐍","🐟","🐸","🦊‍","🦁"],["⚽","🏀","🏈","⚾","🎾","🏐","🏉","🎱","🥊‍","🎯"]],r=i[Math.random()*i.length|0],a=null;function s(t,e,n,o,i){var r=[e,n-.25*o,n+.125*o,n-.0625*o,n+.03125*o,n-.015625*o,n],s=e,l=0,c=r.map(function(t){var e=Math.max(Math.abs(t-s)/Math.abs(i),10);return s=t,l+=e,e}),u=0;return function(t,e){a||((a=document.createElement("style")).type="text/css",document.head.appendChild(a)),a.sheet.insertRule("@keyframes ".concat(t," {\n        ").concat(e,"\n    }"),a.length)}(t,c.map(function(t){var e=u+t/l*100;return u=e,e}).map(function(t,e){return"".concat(Math.round(t),"% { transform: rotate(").concat(r[e].toFixed(2),"deg); }")}).join("\n")),l}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var c=function(){function t(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sounds=[],this.nextSound=0,this.totalSounds=0;for(var i=this.sounds,r=0;r<o;++r)i.push(new Audio(e));i[0].oncanplay=function(){n.totalSounds=o}}var e,n,o;return e=t,(n=[{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.sounds,n=this.nextSound,o=this.totalSounds,i=e[n];o&&i.paused&&(i.volume=t,i.play(),this.nextSound=(n+1)%o)}}])&&l(e.prototype,n),o&&l(e,o),t}(),u=new c("./assets/blip.mp3",16),h=new c("./assets/coin.mp3"),p=new c("./assets/stop.mp3"),f=new c("./assets/unlucky.mp3",4),d=(new c("./assets/win.mp3",4),function(){u.play.apply(u,arguments)}),m=function(){h.play.apply(h,arguments)},_=function(){p.play.apply(p,arguments)},v=function(){f.play.apply(f,arguments)},y=window.navigator,S=y.vibrate?y.vibrate.bind(y):function(){},I=[200,50,50,50,50,25,25,25,25,25,25,25,25],E=[25,25,25,25,25,25,25,25,50,50,50,50,50],g=function(){S(E)},A=function(){S(I)},O=/iPad|iPhone|iPod/.test(navigator.platform||""),T=navigator.userAgent.toLowerCase().includes("firefox"),b=!1,C=null;function P(){b=!0}function w(){b=!1}function k(){b&&(C(),b=!1)}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=document.createElement("DIV");return i.className=Array.isArray(t)?t.join(" "):t,"string"==typeof e?i.innerText=e:e&&i.appendChild(e),o&&(i.style=o),null!==n&&(i.style.transform="rotate(".concat(n,"deg)")),i}function R(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var L=function(){function t(e,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.root=void 0,this.style=void 0,this.index=void 0,this.alpha=void 0,this.angle=0,this.stopAt=0,this.index=e,this.alpha=n;var r=t.C_REEL,a=t.C_CELL,s=t.C_CELL_SHADOW,l=t.C_CELL_BLUR,c=t.C_FIGURE,u=t.C_IS_STOP,h=t.V_INDEX,p=this.root=N([r,u]);if((this.style=p.style).setProperty(h,e),o){var f,d;T?(f=[a,s],d=.5):(f=[a,s,l],d=1);var m=Math.max(2,Math.round((i-.5-2*e)*Math.PI/o.length)),_=1/m;!function(t){for(var e=t.length-1;e>0;--e){var n=Math.floor(Math.random()*(e+1)),o=[t[n],t[e]];t[e]=o[0],t[n]=o[1]}}(o),o.forEach(function(t,e){var o=N(c,t),i=N(a,o,e*n);p.appendChild(i);for(var r=1;r<m;++r)p.appendChild(N(f,o.cloneNode(!0),n*(e+_*r),"opacity: ".concat(d*(1-_*r),"; ")))})}}var e,n,o;return e=t,(n=[{key:"reset",value:function(){var t=this.root,e=this.style,n=this.stopAt;t.classList.remove("is-stop"),e.transform="rotate(".concat(this.angle=(360-n)%360,"deg)"),e.animation="",this.stopAt=0}},{key:"stop",value:function(e,n){var o=this.alpha,i=(360-this.angle-n)%360,r=Math.ceil(i/o)*o,a="stop-".concat(this.index),l=s(a,(360-i)%360,(360-r)%360,o,e)*t.STOP_ANIMATION_DURATION_MULTIPLIER;this.style.animation="".concat(a," ").concat(l,"ms ease-out forwards"),this.root.classList.add(t.C_IS_STOP),this.stopAt=r}}])&&R(e.prototype,n),o&&R(e,o),t}();L.C_REEL="sm__reel",L.C_CELL="sm__cell",L.C_CELL_SHADOW="sm__cell--has-shadow",L.C_CELL_BLUR="sm__cell--has-blur",L.C_FIGURE="sm__figure",L.C_IS_STOP="is-stop",L.V_INDEX="--index",L.STOP_ANIMATION_DURATION_MULTIPLIER=5;n(1);function M(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function D(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var j=function(){function t(e,n,i){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-.8;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.wrapper=void 0,this.root=document.querySelector(t.S_BASE),this.reelsContainer=document.querySelector(t.S_REELS_CONTAINER),this.display=document.querySelector(t.S_DISPLAY),this.reels=[],this.blipFading=void 0,this.reelCount=void 0,this.symbols=void 0,this.alpha=void 0,this.speed=void 0,this.zoomTransitionTimeoutID=null,this.currentReel=null,this.blipCounter=0,this.lastUpdate=0,this.init(e,n,i,a,s,l),window.onresize=this.handleResize.bind(this),document.onkeydown=this.handleKeyDown.bind(this),r=this.handleClick.bind(this),C=r,O?(document.ontouchstart=P,document.ontouchmove=w,document.ontouchcancel=w,document.ontouchend=k):document.onclick=r}var e,n,i;return e=t,(n=[{key:"init",value:function(e,n,o,i,r,a){this.wrapper=e,this.handleUseCoin=n,this.handleGetPrice=o,this.reelCount=i,this.symbols=r,this.speed=a,this.blipFading=1/i;var s=this.alpha=360/r.length,l=M(r),c=2*i+t.UNITS_CENTER;this.resize(),T&&this.root.style.setProperty(t.V_SHADOW_WEIGHT,t.FIREFOX_SHADOW_WEIGHT);for(var u=this.reelsContainer,h=this.reels,p=0;p<i;++p){var f=new L(p,s,l,c);u.appendChild(f.root),h.push(f)}u.appendChild(new L(i).root)}},{key:"start",value:function(){var t=this;this.handleUseCoin(),this.currentReel=0,this.zoomOut(),this.reels.forEach(function(t){return t.reset()}),a&&(a.remove(),a=null),m(),g(),this.lastUpdate=performance.now(),requestAnimationFrame(function(){return t.tick()})}},{key:"stop",value:function(){this.currentReel=null,this.zoomIn(),v()}},{key:"tick",value:function(){var e=this,n=this.reels,o=this.speed,i=this.currentReel,r=this.lastUpdate,a=performance.now(),s=(a-r)*o;if(null!==i){0===(this.blipCounter=(this.blipCounter+1)%t.BLIP_RATE)&&d(1-this.blipFading*i),this.lastUpdate=a;for(var l=n.length-1;l>=i;--l){var c=n[l],u=c.angle=(360+(c.angle+s))%360;c.style.transform="rotate(".concat(u,"deg)")}requestAnimationFrame(function(){return e.tick()})}}},{key:"zoomIn",value:function(){this.zoom()}},{key:"zoomOut",value:function(){this.zoom(!0)}},{key:"zoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];clearTimeout(this.zoomTransitionTimeoutID);var n=this.root;n.style.transition=t.ZOOM_TRANSITION,n.classList[e?"remove":"add"](t.C_HAS_ZOOM),this.zoomTransitionTimeoutID=setTimeout(function(){n.style.transition=""},t.ZOOM_TRANSITION_DURATION)}},{key:"resize",value:function(){var e=this.wrapper,n=this.root,o=this.reelCount,i=this.display,r=n.style,a=e.offsetWidth,s=e.offsetHeight,l=Math.min(a,s)-t.APP_PADDING,c=l/(2*o+t.UNITS_TOTAL)|0;r.setProperty(t.V_WRAPPER_SIZE,"".concat(l,"px")),r.setProperty(t.V_REEL_SIZE,"".concat(c,"px")),r.setProperty(t.V_DISPLAY_SIZE,"".concat(c*o,"px")),r.setProperty(t.V_DISPLAY_ZOOM,"".concat(n.offsetWidth/i.offsetWidth))}},{key:"stopReel",value:function(t){var e=this.speed,n=(performance.now()-this.lastUpdate)*e;this.reels[t].stop(e,n),_(),A()}},{key:"handleResize",value:function(){var t=this;requestAnimationFrame(function(){return t.resize()})}},{key:"handleKeyDown",value:function(t){var e=t.key;" "!==e&&"Enter"!==e||this.handleClick()}},{key:"handleClick",value:function(){var t=this.currentReel;null===t?this.start():(++this.currentReel,this.stopReel(t),t===this.reels.length-1&&this.stop())}}])&&D(e.prototype,n),i&&D(e,i),t}();j.C_HAS_ZOOM="has-zoom",j.S_BASE=".sm__base",j.S_REELS_CONTAINER=".sm__reelsContainer",j.S_DISPLAY=".sm__display",j.V_WRAPPER_SIZE="--wrapperSize",j.V_REEL_SIZE="--reelSize",j.V_DISPLAY_SIZE="--displaySize",j.V_DISPLAY_ZOOM="--displayZoom",j.V_SHADOW_WEIGHT="--shadowWeight",j.UNITS_CENTER=3,j.UNITS_MARGIN=1,j.UNITS_TOTAL=j.UNITS_CENTER+j.UNITS_MARGIN,j.ZOOM_TRANSITION="transform ease-in-out 500ms 250ms",j.ZOOM_TRANSITION_DURATION=1e3,j.BLIP_RATE=4,j.FIREFOX_SHADOW_WEIGHT=.5,j.APP_PADDING=32;n(2);function x(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var U=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.coinsElement=document.querySelector(t.S_COINS),this.jackpotElement=document.querySelector(t.S_JACKPOT),this.spinsElement=document.querySelector(t.S_SPINS),this.mainElement=document.querySelector(t.S_MAIN),this.coins=parseInt(localStorage.coins,10)||100,this.jackpot=parseInt(localStorage.jackpot,10)||1e4,this.spins=parseInt(localStorage.spins,10)||0,this.lastSpin=localStorage.lastSpin||0;var e=Date.now();e-this.lastSpin>=t.ONE_DAY&&(localStorage.jackpot=this.jackpot=0|Math.max(5e3,this.jackpot-5e3+1e4*Math.random()),localStorage.lastSpin=e),new j(this.mainElement,this.handleUseCoin.bind(this),this.handleGetPrice.bind(this),5,r),this.refreshView()}var e,n,o;return e=t,(n=[{key:"handleUseCoin",value:function(){localStorage.coins=this.coins=Math.max(this.coins-1,0)||100,localStorage.jackpot=++this.jackpot,localStorage.spins=++this.spins,this.refreshView()}},{key:"handleGetPrice",value:function(t){var e=Math.round(t*this.jackpot);localStorage.jackpot=this.jackpot-=e,localStorage.coins=this.coins+=e,this.refreshView()}},{key:"refreshView",value:function(){this.coinsElement.innerText=this.coins,this.jackpotElement.innerText=this.jackpot,this.spinsElement.innerText=this.spins}}])&&x(e.prototype,n),o&&x(e,o),t}();U.S_COINS="#coins",U.S_JACKPOT="#jackpot",U.S_SPINS="#spins",U.S_MAIN="#main",U.ONE_DAY=864e5,new U}]);