<!doctype html><html lang="en"><head><meta charset="utf-8"><title>SlotJS / Circular slot machine built with JavaScript & Emojis!</title><meta property="og:title" content="SlotJS / Circular slot machine built with JavaScript & Emojis!"><meta property="og:description" content="🎰 Circular slot machine mobile-first SPA built with JavaScript, CSS variables and Emojis!"><meta property="og:image" content="https://danziger.github.io/slotjs/screenshots/slotjs.png"><meta property="og:image:width" content="928"><meta property="og:image:height" content="928"><meta property="og:image:alt" content="SlotJS / Circular slot machine built with JavaScript & Emojis!"><meta property="og:url" content="https://danziger.github.io/slotjs/"><meta name="twitter:card" content="https://danziger.github.io/slotjs/screenshots/slotjs.png"><link rel="canonical" href="https://danziger.github.io/slotjs/"><meta name="author" content="Daniel Gámez Franco"><meta name="description" content="🎰 Circular slot machine mobile-first SPA built with JavaScript, CSS variables and Emojis!"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><link rel="shortcut icon" href="./favicon.ico"><style>.sm__base{--wrapperSize:100%;--reelSize:32px;--displaySize:96px;--displayZoom:2;--shadowWeight:1;position:relative;width:var(--wrapperSize);height:var(--wrapperSize);box-sizing:border-box;pointer-events:none;-webkit-transform-origin:left center;transform-origin:left center;will-change:transform}.sm__base.has-zoom{-webkit-transform:scale(var(--displayZoom));transform:scale(var(--displayZoom))}.sm__reelsContainer{position:relative;width:100%;height:100%}.sm__reel{--i:0;--bg:transparent;position:absolute;top:calc(var(--index)*var(--reelSize));left:calc(var(--index)*var(--reelSize));width:calc(100% - var(--index)*2*var(--reelSize));height:calc(100% - var(--index)*2*var(--reelSize));background:var(--bg);border-radius:100%;overflow:hidden;box-shadow:0 0 calc(var(--shadowWeight)*var(--reelSize)) 0 rgba(0,0,0,.125);will-change:transform}.sm__reel:first-child,.sm__reel:last-child{box-shadow:none}.sm__cell{position:absolute;height:var(--reelSize);line-height:var(--reelSize);font-size:calc(var(--reelSize)/2);top:50%;left:0;width:50%;margin-top:calc(var(--reelSize)/-2);-webkit-transform-origin:center right;transform-origin:center right}.sm__cell--has-shadow{transition:opacity .125s linear}.is-stop .sm__cell--has-shadow{opacity:0!important}.sm__cell--has-blur{-webkit-filter:blur(calc(var(--reelSize)/8));filter:blur(calc(var(--reelSize)/8))}.sm__figure{display:inline-block;text-align:center;width:var(--reelSize)}.sm__display{position:absolute;top:50%;left:0;width:var(--displaySize);height:var(--reelSize);margin-top:calc(var(--reelSize)/-2)}.sm__display--background{z-index:-1}.sm__display--shadow{border-radius:0 0 2px 2px;box-shadow:0 calc(var(--reelSize)/2) calc(var(--shadowWeight)*var(--reelSize)) calc(var(--reelSize)/-8) rgba(0,0,0,.25)}.app__base{position:relative;display:flex;flex-direction:column;justify-content:space-between;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;max-width:800px;margin:0 auto;font-size:16px;line-height:16px}.app__header{box-shadow:0 64px 128px -40px rgba(0,0,0,.25)}.app__title{padding:24px 16px;margin:0;font-weight:700;font-size:24px;line-height:24px;text-align:center}.app__state{margin:0;list-style:none;padding:0;justify-content:center}.app__prop,.app__state{display:flex;overflow:hidden}.app__prop{width:33.33333333%;box-sizing:border-box;padding:8px}.app__prop+.app__prop{border-left:1px solid #f0f0f0}.app__icon{padding:8px 16px 8px 8px}.app__value{flex:1 0 auto;background:#f0f0f0;border-radius:2px;padding:8px}.app__main{position:relative;padding:16px;flex:1 0 auto;height:0;overflow:hidden;display:flex;align-items:center;justify-content:center}.app__footer{text-align:center;max-width:100vw;box-sizing:border-box;font-weight:700;font-size:13px;line-height:13px}.app__link{padding:16px 64px;display:inline-block;text-decoration:none;color:#000;text-transform:uppercase;box-shadow:0 -12px 32px -16px rgba(0,0,0,.25)}.app__linkUnderline{box-shadow:inset 0 -3px 0 0 rgba(255,200,0,.5)}.app__link:hover>.app__linkUnderline{box-shadow:inset 0 -3px 0 0 #ffc800}body{margin:0;min-height:100vh;font-family:monospace}</style></head><body class="app__base"><header class="app__header"><h1 class="app__title"><span role="img" aria-label="Slot Machine">🎰</span> SlotJS</h1><ul class="app__state"><li class="app__prop"><span class="app__icon" role="img" aria-label="Coins">💶</span> <span class="app__value" id="coins">0</span></li><li class="app__prop"><span class="app__icon" role="img" aria-label="Jackpot">💰</span> <span class="app__value" id="jackpot">0</span></li><li class="app__prop"><span class="app__icon" role="img" aria-label="Spins">🍩</span> <span class="app__value" id="spins">0</span></li></ul></header><main class="app__main" id="main"><section class="sm__base"><div class="sm__display sm__display--background"></div><div class="sm__reelsContainer"></div><div class="sm__display sm__display--shadow"></div></section></main><footer class="app__footer"><a class="app__link" href="https://github.com/Danziger/slotjs">👨‍💻 <span class="app__linkUnderline">Check it out on GitHub</span></a></footer><script>!function(n){var o={};function i(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="./",i(i.s=0)}([function(t,e,n){n(4),t.exports=n(3)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var s=["🍋","🍊","🍉","🍈","🍇","🥝","🍓","🍒","🌟","🍀","💎","🎰"],o=[s,["🧣","⛄","🎄","🎁","🎀","🍾","🍷","🔔","🌟","🦌","🎅"],["🌚","🎃","🦇","😈","🧠","👹","👽","🤡","👻","🧟‍","🧛‍","💀"],["🐞","🐟","🐭","🐸","🐓","🐷","🦀","🐍","🦊‍","🦁","🦕","🦖"],["🎯","🎱","🏐","⛳","⚾","🏈","🏀","⚽","🥉","🥈","🥇","🏆"],["💌","🎁","📸","💘","💋","🔞","💑","💍","💎","💖"],["🎴","🎲","🕶","🥃","💷","💴","💵","💰","🍀","💎","🎰","🧞‍️","🃏"],["🥦","🍋","🍆","🍙","🍯","🍑","🍓","🍭","🍫","🍩","🍕","🍗","🥩","🍣"]],p=o[Math.random()*o.length|0],f=null;function c(t,e,n,o,i){var r,a,s=[e,n-.25*o,n+.125*o,n-.0625*o,n+.03125*o,n-.015625*o,n],l=e,c=0,u=s.map(function(t){var e=Math.max(Math.abs(t-l)/Math.abs(i),10);return l=t,c+=e,e}),h=0,p=u.map(function(t){var e=h+t/c*100;return h=e}).map(function(t,e){return"".concat(Math.round(t),"% { transform: rotate(").concat(s[e].toFixed(2),"deg); }")}).join("\n");return r=t,a=p,f||((f=document.createElement("style")).type="text/css",document.head.appendChild(f)),f.sheet.insertRule("@keyframes ".concat(r," {\n        ").concat(a,"\n    }"),f.length),c}var l=/iPad|iPhone|iPod/.test(navigator.platform||""),y=navigator.userAgent.toLowerCase().includes("firefox");function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r=function(){function r(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:16;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.sounds=[],this.nextSound=0,this.totalSounds=0;for(var o=this.sounds,i=0;i<n;++i)o.push(new Audio(t));o[0].oncanplay=function(){e.totalSounds=n}}var t,e,n;return t=r,(e=[{key:"play",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=this.sounds,n=this.nextSound,o=this.totalSounds,i=e[n];o&&i.paused&&(i.volume=t,i.play(),this.nextSound=(n+1)%o)}}])&&i(t.prototype,e),n&&i(t,n),r}(),a=y?"ogg":"mp3",u=new r("./sounds/blip.".concat(a),32),h=new r("./sounds/coin.".concat(a)),d=new r("./sounds/stop.".concat(a)),m=new r("./sounds/unlucky.".concat(a)),v=new r("./sounds/win.".concat(a)),_=function(){u.play.apply(u,arguments)},S=function(){h.play.apply(h,arguments)},g=function(){d.play.apply(d,arguments)},I=function(){m.play.apply(m,arguments)},E=function(){v.play.apply(v,arguments)},O=window.navigator,b=O.vibrate?O.vibrate.bind(O):function(){},T=[200,50,50,50,50,25,25,25,25,25,25,25,25],A=[25,25,25,25,25,25,25,25,50,50,50,50,50],C=function(){b(A)},w=function(){b(T)},P=!1,k=null;function N(){P=!0}function R(){P=!1}function L(){P&&(k(),P=!1)}function M(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,i=document.createElement("DIV");return i.className=Array.isArray(t)?t.join(" "):t,"string"==typeof e?i.innerText=e:e&&i.appendChild(e),o&&(i.style=o),null!==n&&(i.style.transform="rotate(".concat(n,"deg)")),i}function D(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var j=function(){function v(t,r,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),this.root=void 0,this.style=void 0,this.index=void 0,this.alpha=void 0,this.shadowCount=void 0,this.angle=0,this.stopAt=0,this.index=t,this.alpha=r;var o=v.C_REEL,a=v.C_CELL,i=v.C_CELL_SHADOW,s=v.C_CELL_BLUR,l=v.C_FIGURE,c=v.C_IS_STOP,u=v.V_INDEX,h=this.root=M([o,c]);if((this.style=h.style).setProperty(u,t),e){var p,d;d=y?(p=[a,i],.5):(p=[a,i,s],1);var f=this.shadowCount=Math.max(2,Math.round((n-.5-2*t)*Math.PI/e.length)),m=1/f;!function(t){for(var e=t.length-1;0<e;--e){var n=Math.floor(Math.random()*(e+1)),o=[t[n],t[e]];t[e]=o[0],t[n]=o[1]}}(e),e.forEach(function(t,e){var n=M(l,t),o=M(a,n,e*r);h.appendChild(o);for(var i=1;i<f;++i)h.appendChild(M(p,n.cloneNode(!0),r*(e+m*i),"opacity: ".concat(d*(1-m*i),"; ")))})}}var t,e,n;return t=v,(e=[{key:"reset",value:function(){var t=this.root,e=this.style,n=this.stopAt;t.classList.remove("is-stop"),e.transform="rotate(".concat(this.angle=(360-n)%360,"deg)"),e.animation="",this.stopAt=0}},{key:"stop",value:function(t,e){var n=this.alpha,o=this.root,i=(360-this.angle-e)%360,r=Math.ceil(i/n),a=r*n,s="stop-".concat(this.index),l=c(s,(360-i)%360,(360-a)%360,n,t)*v.STOP_ANIMATION_DURATION_MULTIPLIER;return this.stopAt=a,this.style.animation="".concat(s," ").concat(l,"ms ease-out forwards"),o.classList.add(v.C_IS_STOP),(o.children[r*this.shadowCount]||o.children[0]).innerText}}])&&D(t.prototype,e),n&&D(t,n),v}();j.C_REEL="sm__reel",j.C_CELL="sm__cell",j.C_CELL_SHADOW="sm__cell--has-shadow",j.C_CELL_BLUR="sm__cell--has-blur",j.C_FIGURE="sm__figure",j.C_IS_STOP="is-stop",j.V_INDEX="--index",j.STOP_ANIMATION_DURATION_MULTIPLIER=5;n(1);function x(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function z(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var U=function(){function d(t,e,n){var o,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:3,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:s,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:-.8;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),this.wrapper=void 0,this.root=document.querySelector(d.S_BASE),this.reelsContainer=document.querySelector(d.S_REELS_CONTAINER),this.display=document.querySelector(d.S_DISPLAY),this.reels=[],this.blipFading=void 0,this.reelCount=void 0,this.symbols=void 0,this.alpha=void 0,this.speed=void 0,this.zoomTransitionTimeoutID=null,this.currentCombination=[],this.currentPrize=null,this.currentReel=null,this.blipCounter=0,this.lastUpdate=0,this.init(t,e,n,i,r,a),window.onresize=this.handleResize.bind(this),document.onkeydown=this.handleKeyDown.bind(this),o=this.handleClick.bind(this),k=o,l?(document.ontouchstart=N,document.ontouchmove=R,document.ontouchcancel=R,document.ontouchend=L):document.onclick=o}var t,e,n;return t=d,(e=[{key:"init",value:function(t,e,n,o,i,r){this.wrapper=t,this.handleUseCoin=e,this.handleGetPrice=n,this.reelCount=o,this.symbols=i,this.speed=r,this.blipFading=1/o;var a=this.alpha=360/i.length,s=x(i),l=2*o+d.UNITS_CENTER;this.resize(),y&&this.root.style.setProperty(d.V_SHADOW_WEIGHT,d.FIREFOX_SHADOW_WEIGHT);for(var c=this.reelsContainer,u=this.reels,h=0;h<o;++h){var p=new j(h,a,s,l);c.appendChild(p.root),u.push(p)}c.appendChild(new j(o).root)}},{key:"start",value:function(){var t=this;this.handleUseCoin(),this.currentCombination=[],this.currentPrize=null,this.currentReel=0,this.zoomOut(),this.reels.forEach(function(t){return t.reset()}),f&&(f.remove(),f=null),S(),C(),this.lastUpdate=performance.now(),requestAnimationFrame(function(){return t.tick()})}},{key:"stop",value:function(){this.currentReel=null,this.zoomIn();var t=this.currentPrize;t?(E(),this.handleGetPrice.apply(this,x(t))):I()}},{key:"tick",value:function(){var t=this,e=this.reels,n=this.speed,o=this.currentReel,i=this.lastUpdate,r=performance.now(),a=(r-i)*n;if(null!==o){0===(this.blipCounter=(this.blipCounter+1)%d.BLIP_RATE)&&_(1-this.blipFading*o),this.lastUpdate=r;for(var s=e.length-1;o<=s;--s){var l=e[s],c=l.angle=(360+(l.angle+a))%360;l.style.transform="rotate(".concat(c,"deg)")}requestAnimationFrame(function(){return t.tick()})}}},{key:"zoomIn",value:function(){this.zoom()}},{key:"zoomOut",value:function(){this.zoom(!0)}},{key:"zoom",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];clearTimeout(this.zoomTransitionTimeoutID);var e=this.root;e.style.transition=d.ZOOM_TRANSITION,e.classList[t?"remove":"add"](d.C_HAS_ZOOM),this.zoomTransitionTimeoutID=setTimeout(function(){e.style.transition=""},d.ZOOM_TRANSITION_DURATION)}},{key:"resize",value:function(){var t=this.wrapper,e=this.root,n=this.reelCount,o=this.display,i=e.style,r=t.offsetWidth,a=t.offsetHeight,s=Math.min(r,a)-d.APP_PADDING,l=s/(2*n+d.UNITS_TOTAL)|0;i.setProperty(d.V_WRAPPER_SIZE,"".concat(s,"px")),i.setProperty(d.V_REEL_SIZE,"".concat(l,"px")),i.setProperty(d.V_DISPLAY_SIZE,"".concat(l*n,"px")),i.setProperty(d.V_DISPLAY_ZOOM,"".concat(e.offsetWidth/o.offsetWidth))}},{key:"stopReel",value:function(t){var e=this.speed,n=(performance.now()-this.lastUpdate)*e;this.currentCombination.push(this.reels[t].stop(e,n)),this.checkPrize(),g(),w()}},{key:"checkPrize",value:function(){for(var t=this.currentReel,e=this.currentCombination,n=this.reelCount,o=this.symbols,i={},r=0,a="",s="",l=0,c=0;c<t;++c){var u=e[c],h=i[u]=a===u?i[u]+1:1;if(a=u,r<h){r=h;var p=o.indexOf(u);o.indexOf(s)<p&&(s=u,l=p+1)}}2<r&&(this.currentPrize=[l,r*(l/o.length)/n])}},{key:"handleResize",value:function(){var t=this;requestAnimationFrame(function(){return t.resize()})}},{key:"handleKeyDown",value:function(t){var e=t.key;" "!==e&&"Enter"!==e||this.handleClick()}},{key:"handleClick",value:function(){var t=this.currentReel;null===t?this.start():(++this.currentReel,this.stopReel(t),t===this.reels.length-1&&this.stop())}}])&&z(t.prototype,e),n&&z(t,n),d}();U.C_HAS_ZOOM="has-zoom",U.S_BASE=".sm__base",U.S_REELS_CONTAINER=".sm__reelsContainer",U.S_DISPLAY=".sm__display",U.V_WRAPPER_SIZE="--wrapperSize",U.V_REEL_SIZE="--reelSize",U.V_DISPLAY_SIZE="--displaySize",U.V_DISPLAY_ZOOM="--displayZoom",U.V_SHADOW_WEIGHT="--shadowWeight",U.UNITS_CENTER=3,U.UNITS_MARGIN=1,U.UNITS_TOTAL=U.UNITS_CENTER+U.UNITS_MARGIN,U.ZOOM_TRANSITION="transform ease-in-out 500ms 250ms",U.ZOOM_TRANSITION_DURATION=1e3,U.BLIP_RATE=4,U.FIREFOX_SHADOW_WEIGHT=.5,U.APP_PADDING=32;n(2);function V(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var W=function(){function h(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),this.coinsElement=document.querySelector(h.S_COINS),this.jackpotElement=document.querySelector(h.S_JACKPOT),this.spinsElement=document.querySelector(h.S_SPINS),this.mainElement=document.querySelector(h.S_MAIN),this.coins=parseInt(localStorage.coins,10)||100,this.jackpot=parseInt(localStorage.jackpot,10)||1e3,this.spins=parseInt(localStorage.spins,10)||0,this.lastSpin=localStorage.lastSpin||0;var t=Date.now();t-this.lastSpin>=h.ONE_DAY&&(localStorage.jackpot=this.jackpot=0|Math.max(500,this.jackpot-500+1e3*Math.random()),localStorage.lastSpin=t);var e,n,o,i=new U(this.mainElement,this.handleUseCoin.bind(this),this.handleGetPrice.bind(this),5,p),r=i.speed,a=function(){console.log("Ok... 👌"),setTimeout(function(){console.log(e)},5e3)},s=function(){i.speed=r/100,e="Ok, really... Last chance. Do yo want to go back to normal mode? 😠",n=l,o=a,console.log("Ok, but we are calling the cops... 🚔"),console.log("Do you want to stop this before it's too late?")},l=function(){i.speed=r,e="Are you sure...? Do you wanna cheat? 😏 💰",n=s,o=a,console.log("Playing in normal mode."),console.log("Wanna cheat? 😏")};l();var c=function(){n()},u=function(){o()};Object.defineProperties(window,{yes:{get:c},no:{get:u},Yes:{get:c},No:{get:u}}),this.refreshView()}var t,e,n;return t=h,(e=[{key:"handleUseCoin",value:function(){localStorage.coins=this.coins=Math.max(this.coins-1,0)||100,localStorage.jackpot=++this.jackpot,localStorage.spins=++this.spins,localStorage.lastSpin=this.lastSpin=Date.now(),this.refreshView()}},{key:"handleGetPrice",value:function(t,e){var n=t+Math.round(e*this.jackpot);localStorage.jackpot=this.jackpot=Math.max(this.jackpot-n,0)||1e3,localStorage.coins=this.coins+=n,this.refreshView()}},{key:"refreshView",value:function(){this.coinsElement.innerText=this.coins,this.jackpotElement.innerText=this.jackpot,this.spinsElement.innerText=this.spins}}])&&V(t.prototype,e),n&&V(t,n),h}();W.S_COINS="#coins",W.S_JACKPOT="#jackpot",W.S_SPINS="#spins",W.S_MAIN="#main",W.ONE_DAY=864e5,new W}]);</script></body></html>